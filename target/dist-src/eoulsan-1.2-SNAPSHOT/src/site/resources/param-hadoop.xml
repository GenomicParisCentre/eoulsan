<analysis>
    <formatversion>1.0</formatversion>
    <name>my analysis</name>
    <description>Demo analysis</description>
    <author>Laurent Jourdren</author>

    <steps>

        <!-- Filter reads -->
        <!--step skip="false">
                <name>filterreads</name>
                <parameters>
                        <parameter>
                                <name>lengthThreshold</name>
                                <value>11</value>
                        </parameter>
                        <parameter>
                                <name>qualityThreshold</name>
                                <value>12</value>
                        </parameter>
                </parameters>
        </step-->

        <!-- Map reads -->
        <!--step skip="false">
                <name>mapreads</name>
                <parameters>
                        <parameter>
                                <name>mapper</name>
                                <value>soap</value>
                        </parameter>
                </parameters>
        </step-->

        <!-- SAM filter -->
        <!--step skip="false">
                <name>filtersam</name>
                <parameters>
                        <parameter>
                                <name>mappingqualitythreshold</name>
                                <value>0</value>
                        </parameter>
                </parameters>
        </step--> 

	<!-- Filter reads, Map and filter SAM in one step in hadoop mode-->
	<step skip="false">
		<name>filterandmap</name>
		<parameters>
			<parameter>
				<name>trim.length.threshold</name>
				<value>11</value>
			</parameter>
			<parameter>
				<name>quality.threshold</name>
				<value>12</value>
			</parameter>
			<parameter>
				<name>mapper</name>
				<value>bowtie</value>
			</parameter>
			<parameter>
				<name>mappingqualitythreshold</name>
				<value>0</value>
			</parameter>
		</parameters>
	</step>


        <!-- Filter samples -->
        <step skip="false">
                <name>filterSamples</name>
                <parameters>
                        <parameter>
                                <name>threshold</name>
                                <value>0</value>
                        </parameter>
                </parameters>
        </step>

        <!-- Expression -->
        <step skip="false">
                <name>expression</name>
                <parameters>
                        <parameter>
                                <name>genomictype</name>
                                <value>exon</value>
                        </parameter>
                </parameters>
        </step>

        <!-- Anadiff -->
        <!--step skip="false">
                <name>anadiff</name>
                <parameters/>
        </step-->


    </steps>

    <globals>
      
	<!-- Temporary directory to use in local mode -->
        <parameter>
	        <name>main.tmp.dir</name>
	        <value>/tmp</value>
        </parameter>


	<!-- Amazon MapReduce cluster configuration -->
	<parameter>
	        <name>aws.mapreduce.endpoint</name>
	        <value>eu-west-1.elasticmapreduce.amazonaws.com</value>
        </parameter>
	<parameter>
	        <name>aws.mapreduce.hadoop.version</name>
	        <value>0.20</value>
        </parameter>	
	<parameter>
	        <name>aws.mapreduce.instances.type</name>
	        <value>m1.xlarge</value>
        </parameter>
	<parameter>
	        <name>aws.mapreduce.instances.number</name>
	        <value>5</value>
        </parameter>

    </globals>

</analysis>
