<?xml version="1.0" encoding="UTF-8"?>
<!-- 
/*
 *                  Eoulsan development code
 *
 * This code may be freely distributed and modified under the
 * terms of the GNU Lesser General Public License version 2.1 or
 * later and CeCILL-C. This should be distributed with the code.
 * If you do not have a copy, see:
 *
 *      http://www.gnu.org/licenses/lgpl-2.1.txt
 *      http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.txt
 *
 * Copyright for this code is held jointly by the Genomic platform
 * of the Institut de Biologie de l'École Normale Supérieure and
 * the individual authors. These should be listed in @author doc
 * comments.
 *
 * For more information on the Eoulsan project and its aims,
 * or to join the Eoulsan Google group, visit the home page
 * at:
 *
 *      http://www.transcriptome.ens.fr/eoulsan
 *
 */
-->
<document> 

  <properties>
    <title>Filter and map reads step</title>
    <author email="jourdren@biologie.ens.fr">Laurent Jourdren</author> 
  </properties> 



  <body>
  
    <section name="Filter and map reads step">

      <p>This step combine in one step in Hadoop mode the filtering of the reads, the mapping and the filtering of the alignments.
      This step only is available in hadoop mode is more efficient than using the 3 steps successively.</p>  

      <ul>
 	<li><b>Internal name</b>: filterandmap</li> 
    <li><b>Available</b>: Distributed mode only</li>
    <li><b>Multithreaded in local mode</b>: N/A</li>
 	<li><b>Input</b>: Fastq or tfq file (tfq files are tabuleted fastq files with one read by line used in hadoop mode)</li>
	<li><b>Output</b>: filtered alignment file in SAM format (e.g. <code>filtered_mapper_results_1.sam</code>)</li>

	<br/>
        <li><b>Optional parameters</b>:</li>
	<table>
		<tr><th>Parameter</th><th>Type</th><th>Description</th><th>Default value</th></tr>
		<tr><td>hadoop.threads</td><td>integer</td><td>Define the maximum number of threads to use in hadoop mode.</td><td>0 (the number of available processors)</td></tr>
		<tr><td>trim.length.threshold</td><td>integer</td><td>The threshold for the length of the reads. Unit in bases.</td><td>Not set</td></tr>
		<tr><td>quality.threshold</td><td>float</td><td>The threshold for the mean base quality. Unit in decimal quality score.</td><td>Not set</td></tr>
		<tr><td>illuminaid</td><td>none</td><td>Remove all reads that not pass illumina filters.</td><td>Not set</td></tr>
	    <tr><td>mapper</td><td>string</td><td>The name of the mapper to use</td><td>None, this parameter is mandatory</td></tr>
        <tr><td>mapperArguments</td><td>string</td><td>Mapper additional command line arguments</td><td>None, this parameter is mandatory. (e.g. bowtie, bwa, soap).</td></tr>
        <tr><td>mappingqualitythreshold</td><td>integer</td><td>Threshold for the mapping quality. An integer between [0-255].</td><td>0</td></tr>
	</table>
      </ul>

      <p>For the list of the available built-in mappers and default arguments, see the <a href="./step-mapreads.html">Map reads step page</a>.</p>
      
    </section>


  </body>
  
</document>
